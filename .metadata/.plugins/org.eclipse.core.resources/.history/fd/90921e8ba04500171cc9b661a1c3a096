package cliente;

import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.PrintStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

import Protocolo.ProtocoloPedido;

public class Cliente implements Runnable{
	  private String host = Constants.host;

	   private int porta = Constants.porta;
	   private boolean runner = true;
	   private ProtocoloPedido pedido;

	   public Cliente (ProtocoloPedido per) {
		   this.pedido = per;
	   }
	   public void run(){
		 try{
	     Socket cliente = new Socket(this.host, this.porta);
	     
	     ObjectOutputStream saida = new ObjectOutputStream(cliente.getOutputStream());
	     saida.writeObject(pedido);
	     
	     // thread para receber mensagens do servidor
	     Recebedor r = new Recebedor(cliente.getInputStream());
	     new Thread(r).start();
	       
	     saida.close();
	     cliente.close();    

	   }catch(Exception e){
		   this.para();
	   }
	}
	private void para() {
		this.runner = false;
	}
}