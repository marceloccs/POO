package cliente;

import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.PrintStream;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.Scanner;

import Protocolo.ProtocoloPedido;

public class ClienteNormal{
	  private String host = Constants.host;

	   private int porta = Constants.porta;
	   private boolean runner = true;
	   private ProtocoloPedido pedido;

	   public ClienteNormal (ProtocoloPedido per) {
		   this.pedido = per;
	   }

	   

	   public Object run(){
		 Object retorno;
		 try{
	     Socket cliente = new Socket(this.host, this.porta);
	     
	     // lê msgs do teclado e manda pro servidor
	     ObjectOutputStream  saida = new ObjectOutputStream(cliente.getOutputStream());
	     saida.writeObject(pedido);
	     
	     // thread para receber mensagens do servidor
	     Recebedor r = new Recebedor(cliente.getInputStream());
	     retorno = r.pegaObjeto();
	     saida.close();
	     cliente.close();    
	     return retorno;
	   }catch(Exception e){
		   this.para();
	   }
	}
	
	   private void para() {
		this.runner = false;
		
	}

	 }